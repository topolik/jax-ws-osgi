<attachments xmlns:lfr="http://liferay.com/2014/04/addressing"
             xmlns:wsp="http://www.w3.org/ns/ws-policy"
             xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">

    <wsp:PolicyAttachment>
        <wsp:AppliesTo>
            <!--
            <lfr:Service>
                <tns:JAXWSService xmlns:tns="http://remote.service.portal.liferay.com/" />
            </lfr:Service>
            <lfr:Endpoint>
                <tns:JAXWSService2 xmlns:tns="http://remote.service.portal.liferay.com/" />
            </lfr:Endpoint>
            -->
            <lfr:BindingOperation>
                <tns:JAXWSService
                        xmlns:tns="http://remote.service.portal.liferay.com/"/>
            </lfr:BindingOperation>
            <!--<lfr:BindingOperation>-->
            <!--<tns:JAXWSService2-->
            <!--xmlns:tns="http://remote.service.portal.liferay.com/"/>-->
            <!--</lfr:BindingOperation>-->
        </wsp:AppliesTo>
        <!--<wsp:PolicyReference URI="/test-policy.xml" />-->
        <wsp:Policy wsu:Id="ThePolicyMustHaveWsuIdToBeReferenced"
                    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
                    xmlns:wsp="http://www.w3.org/ns/ws-policy"
                    xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
            <wsp:All>
                <sp:SignedEndorsingSupportingTokens>
                    <wsp:Policy>
                        <sp:SamlToken
                                sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
                            <wsp:Policy>
                                <sp:WssSamlV20Token11/>
                            </wsp:Policy>
                        </sp:SamlToken>
                    </wsp:Policy>
                </sp:SignedEndorsingSupportingTokens>
                <!--<sp:SignedSupportingTokens>-->
                <!--<wsp:Policy>-->
                <!--<sp:UsernameToken>-->
                <!--<wsp:Policy>-->
                <!--<sp:NoPassword/>-->
                <!--</wsp:Policy>-->
                <!--</sp:UsernameToken>-->
                <!--</wsp:Policy>-->
                <!--</sp:SignedSupportingTokens>-->
                <sp:SignedParts>
                    <sp:Body/>
                </sp:SignedParts>
            </wsp:All>
        </wsp:Policy>
    </wsp:PolicyAttachment>

    <wsp:PolicyAttachment>
        <wsp:AppliesTo>
            <lfr:BindingMessage>
                <tns:JAXWSService2
                        xmlns:tns="http://remote.service.portal.liferay.com/"/>
            </lfr:BindingMessage>
        </wsp:AppliesTo>
        <!-- http://cxf.547215.n5.nabble.com/SAML-token-policy-combines-with-Encryp-Sign-policy-will-throw-exceptions-td5734400.html -->
        <wsp:Policy
                wsu:Id="SAML-Token-policy"
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
                xmlns:wsp="http://www.w3.org/ns/ws-policy"
                xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
            <wsp:ExactlyOne>
                <wsp:All>
                    <sp:AsymmetricBinding>
                        <wsp:Policy>
                            <sp:InitiatorToken>
                                <wsp:Policy>
                                    <sp:IssuedToken
                                            sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
                                        <sp:RequestSecurityTokenTemplate>
                                            <t:TokenType
                                                    xmlns:t="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
                                                http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0
                                            </t:TokenType>
                                            <t:KeyType
                                                    xmlns:t="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
                                                http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey
                                            </t:KeyType>
                                        </sp:RequestSecurityTokenTemplate>
                                        <wsp:Policy>
                                            <!--sp:RequireInternalReference /-->
                                            <sp:WssX509V3Token10/>
                                            <sp:RequireIssuerSerialReference/>
                                        </wsp:Policy>
                                    </sp:IssuedToken>
                                </wsp:Policy>
                            </sp:InitiatorToken>
                            <sp:RecipientToken>
                                <wsp:Policy>
                                    <sp:X509Token
                                            sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/Never">
                                        <wsp:Policy>
                                            <sp:WssX509V3Token10/>
                                            <sp:RequireIssuerSerialReference/>
                                        </wsp:Policy>
                                    </sp:X509Token>
                                </wsp:Policy>
                            </sp:RecipientToken>
                            <sp:Layout>
                                <wsp:Policy>
                                    <sp:Lax/>
                                </wsp:Policy>
                            </sp:Layout>
                            <sp:IncludeTimestamp/>
                            <sp:OnlySignEntireHeadersAndBody/>
                            <sp:AlgorithmSuite>
                                <wsp:Policy>
                                    <sp:Basic256/>
                                </wsp:Policy>
                            </sp:AlgorithmSuite>
                        </wsp:Policy>
                    </sp:AsymmetricBinding>
                    <sp:Wss11
                            xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
                        <wsp:Policy>
                            <sp:MustSupportRefIssuerSerial/>
                            <sp:MustSupportRefThumbprint/>
                            <sp:MustSupportRefEncryptedKey/>
                        </wsp:Policy>
                    </sp:Wss11>
                    <sp:Trust13
                            xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
                        <wsp:Policy>
                            <sp:MustSupportIssuedTokens/>
                            <sp:RequireClientEntropy/>
                            <sp:RequireServerEntropy/>
                        </wsp:Policy>
                    </sp:Trust13>
                </wsp:All>
            </wsp:ExactlyOne>
        </wsp:Policy>
    </wsp:PolicyAttachment>
</attachments>
